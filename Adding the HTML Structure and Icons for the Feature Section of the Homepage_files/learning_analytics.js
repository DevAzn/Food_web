(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{119:function(e,t,n){"use strict";n.r(t);var r=n(15),o=n(6),c=n(13);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=void 0,s=void 0,d=[],f=function(e){switch(e.type){case"DOMContentLoaded":return"page view";case"activity:ping":return"page activity ping";case"beforeunload":return"page closed";case"editor:focus":return"start editing code";case"guide:submission:passed":return"passed code submission";case"guide:submission:sent":return"submitted code";case"pagefocus":return"page focus";case"pageoutoffocus":return"page out of focus";case"quiz:started":return"quiz started";case"quiz:submitted":return"quiz submitted";case"turbolinks:load":return"page view";case"videojs:end":case"videojs:pause":return"video stopped";case"videojs:play":return"video started";default:return e.type}},p=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Array.from(document.querySelectorAll(".analytics-param")).reduce((function(e,t){return Object.assign(e,u({},t.dataset.key,t.dataset.value))}),{}),{type:f(e)})},l=function(e){var t=(new Date).getTime();(s||0)<t&&document.hasFocus()&&(document.dispatchEvent(new Event("activity:ping")),s=t+6e4)},v=function(e){d.push(p(e)),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(a)for(var n;n=d.shift();)a.push("insert",n).receive("error",(function(e){var t=e.reason;Object(o.a)(new c.a(t))}));else t<=120?window.setTimeout((function(){e(t+1)}),1e3):console.error("Tracking is not available",JSON.stringify(n))}()};document.addEventListener("DOMContentLoaded",(function e(){Object(c.b)().then((function(e){var t=e.channel("tracking:events",{});t.join().receive("error",(function(e){var t=e.reason;Object(o.a)("Channel Error",new c.a(t))})),a=t})).catch((function(){a=void 0,window.setTimeout(e,1e3)}))})),document.addEventListener("DOMContentLoaded",v),document.addEventListener("activity:ping",v),document.addEventListener("editor:focus",v),document.addEventListener("guide:submission:passed",v),document.addEventListener("guide:submission:sent",v),document.addEventListener("pagefocus",v),document.addEventListener("pageoutoffocus",v),document.addEventListener("quiz:started",v),document.addEventListener("quiz:submitted",v),document.addEventListener("videojs:end",v),document.addEventListener("videojs:pause",v),document.addEventListener("videojs:play",v),window.addEventListener("beforeunload",v),"undefined"!=typeof r&&r.supported?document.addEventListener("turbolinks:load",v):document.addEventListener("DOMContentLoaded",v),document.addEventListener("visibilitychange",(function(e){document.hidden?document.dispatchEvent(new Event("pageoutoffocus")):document.dispatchEvent(new Event("pagefocus"))})),document.addEventListener("click",l),document.addEventListener("keydown",l),document.addEventListener("mousemove",l),document.addEventListener("mouseup",l),document.addEventListener("touchstart",l),document.addEventListener("wheel",l)},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return k}));var r=n(10),o=n.n(r),c=n(24),i=n(6);function u(e,t,n,r,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void n(s)}u.done?t(a):Promise.resolve(a).then(r,o)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return function(){var t,n=b(e);if(v()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)}}function d(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function p(e){var t="function"===typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)})(e)}function l(e,t,n){return(l=v()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&m(o,n.prototype),o}).apply(null,arguments)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}document._trackingSocket=void 0;var w=!1,y=1e3,g=!1;window.addEventListener("beforeunload",(function(){return w=!0}));var h=function(e){f(n,e);var t=s(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).name="TrackingChannelError",r}return n}(p(Error)),O=function(e){f(n,e);var t=s(n);function n(e,r){var o;return a(this,n),(o=t.call(this,r)).name="TrackingConnectionError: ".concat(e),o}return n}(p(Error)),k=function(){var e,t=(e=o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){document._trackingSocket?"function"==typeof document._trackingSocket.isConnected&&document._trackingSocket.isConnected()?(g=!1,y=1e3,e(document._trackingSocket)):window.setTimeout((function(){return e(k())}),1e3):(document._trackingSocket={},new Promise((function(e,t){var n=new XMLHttpRequest,r=function(e){return function(){n.onload=null,n.onreadystatechange=null,n.abort(),t(new O("Socket Connection Details Request ".concat(e),"Request has been cancelled"))}},o=r("Cancelled");n.open("POST","/api/tracking_token"),n.withCredentials=!0,n.setRequestHeader("Content-Type","application/json");var c=window.setTimeout(r("Timeout"),1e4);n.onload=function(){if(200===n.status){var r=JSON.parse(n.response);e(r)}else{var o=n.responseText||"Request failed",c=n.statusText||"Error",i="Socket Connection Details Request ".concat(c);t(new O(i,o))}},n.onreadystatechange=function(){4===n.readyState&&(window.clearTimeout(c),window.removeEventListener("beforeunload",o),0===n.status)&&t(new O("Socket Connection Details Request Rejection","Request failed prematurely"))},window.addEventListener("beforeunload",o),n.send()})).then((function(t){var n=t.socketUrl,r=t.token;document._trackingSocket=new c.Socket(n,{params:{token:r}}),document._trackingSocket.onClose((function(){document._trackingSocket.disconnect(),document._trackingSocket=void 0,window.setTimeout(k,y)})),document._trackingSocket.connect(),e(k(document._trackingSocket))})).catch((function(n){if(w)console.warn(n),t(n);else{var r=!n.name.includes("Unauthorized"),o="Request failed prematurely"!==n.message,c="Request has been cancelled"===n.message;!g&&r&&o&&!c?(Object(i.a)(n),g=!0):console.error(n),document._trackingSocket=void 0,y*=2,window.setTimeout((function(){k().then((function(t){return e(t)}))}),y)}})))})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function i(e){u(c,r,o,i,a,"next",e)}function a(e){u(c,r,o,i,a,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(14);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={user_id:document.currentUserId,camper_id:document.currentCamperId,subdomain:document.currentSubdomain},a=new r.a({key:"a1b2e86b-4c3e-4b7e-b603-591b394ae6f8",revision:"e583ab1e244570cce256d22b869a1971ac763a5a"}),s=function(e,t){return a.sendError(e,c({},u,{location:window.location.href}))},d=function(e,t){return a.wrap(e,c({},u,{},t))}}},[[119,72,2,4]]]);
//# sourceMappingURL=learning_analytics.b57a14eb82bbe8edbe6c.chunk.js.map